# from https://docs.github.com/en/actions/how-tos/reuse-automations/reuse-workflows#example-caller-workflow
#
# this version uses PATs or GH APP token instead of the  automatically generated
# GITHUB_TOKEN; this is because the latter doesn't allow triggering workflows
# off tag pushes if said tag was pushed by a workflow using GITHUB_TOKEN (the
# recursive call protection GH has built in)
#
name: Call a reusable workflow

#on:
  #pull_request:
    #branches:
      #- main
# note "create" event is just so our flows trigger on tag pushes that
# are tagged with [ci skip], see https://github.com/orgs/community/discussions/179637
on: [push, create]
#on:
  #push:
    #branches: [ "main", "master" ]

jobs:
  call-build:
    uses: haridusministeerium/workflows/.github/workflows/py-build-publish-app.yml@master
    #secrets:
      #token: ${{ secrets.GITHUB_TOKEN }}
    secrets: inherit
